{% extends "base.html" %}

{% block content %}
    <link rel="Stylesheet" href="https://cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css"/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.3.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>

    <style>
        .zoom {
            transition: transform .1s;
        }
        .zoom:hover {
            transform: scale(5);
        }
    </style>
    <style>
        table, th, td {
            padding: 5px;
            text-align: center;
        }
        td {}
        table {
            border-spacing: 15px;
        }
    </style>
    <style>
        .img-container {
            text-align: center;
        }
    </style>
    <style>
        body, html {
            height: 100%;
            margin: 0;
        }

        /* Style tab links */
        .tablink {
            background-color: #555;
            color: #ffffff;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            font-size: 17px;
            width: 14%;
        }

        .tablink:hover {
            background-color: #777;
        }

        /* Style the tab content (and add height:100% for full page content) */
        .tabcontent {
            display: none;
            height: 100%;
        }
    </style>
    <script>
        function openPage(pageName, elmnt) {
            // Hide all elements with class="tabcontent" by default */
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }

            // Remove the background color of all tablinks/buttons
            tablinks = document.getElementsByClassName("tablink");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].style.backgroundColor = "";
            }

            // Show the specific tab content
            document.getElementById(pageName).style.display = "block";

            // Add the specific color to the button used to open the tab content
            elmnt.style.backgroundColor = "blue";
        }

        // Get the element with id="defaultOpen" and click on it
    </script>
    <h1>Товары</h1>
    <form method="post">
        <input type ="submit" name="action" value="Обновить">
    </form>
    <script>
        $(document).ready(function() {
            $('#MyTable').DataTable( {
                initComplete: function () {
                    this.api().columns().every( function () {
                        var column = this;
                        var select = $('<select><option value=""></option></select>')
                            .appendTo( $(column.footer()).empty() )
                            .on( 'change', function () {
                                var val = $.fn.dataTable.util.escapeRegex(
                                    $(this).val()
                                );
                                //to select and search from grid
                                column
                                    .search( val ? '^'+val+'$' : '', true, false )
                                    .draw();
                            } );

                        column.data().unique().sort().each( function ( d, j ) {
                            select.append( '<option value="'+d+'">'+d+'</option>' )
                        } );
                    } );
                }
            } );
        } );
        $(document).ready(function() {
            $('#MyTable1').DataTable( {
                initComplete: function () {
                    this.api().columns().every( function () {
                        var column = this;
                        var select = $('<select><option value=""></option></select>')
                            .appendTo( $(column.footer()).empty() )
                            .on( 'change', function () {
                                var val = $.fn.dataTable.util.escapeRegex(
                                    $(this).val()
                                );
                                //to select and search from grid
                                column
                                    .search( val ? '^'+val+'$' : '', true, false )
                                    .draw();
                            } );

                        column.data().unique().sort().each( function ( d, j ) {
                            select.append( '<option value="'+d+'">'+d+'</option>' )
                        } );
                    } );
                }
            } );
        } );
        $(document).ready(function() {
            $('#MyTable2').DataTable( {
                initComplete: function () {
                    this.api().columns().every( function () {
                        var column = this;
                        var select = $('<select><option value=""></option></select>')
                            .appendTo( $(column.footer()).empty() )
                            .on( 'change', function () {
                                var val = $.fn.dataTable.util.escapeRegex(
                                    $(this).val()
                                );
                                //to select and search from grid
                                column
                                    .search( val ? '^'+val+'$' : '', true, false )
                                    .draw();
                            } );

                        column.data().unique().sort().each( function ( d, j ) {
                            select.append( '<option value="'+d+'">'+d+'</option>' )
                        } );
                    } );
                }
            } );
        } );
        $(document).ready(function() {
            $('#MyTable3').DataTable( {
                initComplete: function () {
                    this.api().columns().every( function () {
                        var column = this;
                        var select = $('<select><option value=""></option></select>')
                            .appendTo( $(column.footer()).empty() )
                            .on( 'change', function () {
                                var val = $.fn.dataTable.util.escapeRegex(
                                    $(this).val()
                                );
                                //to select and search from grid
                                column
                                    .search( val ? '^'+val+'$' : '', true, false )
                                    .draw();
                            } );

                        column.data().unique().sort().each( function ( d, j ) {
                            select.append( '<option value="'+d+'">'+d+'</option>' )
                        } );
                    } );
                }
            } );
        } );
        $(document).ready(function() {
            $('#MyTable4').DataTable( {
                initComplete: function () {
                    this.api().columns().every( function () {
                        var column = this;
                        var select = $('<select><option value=""></option></select>')
                            .appendTo( $(column.footer()).empty() )
                            .on( 'change', function () {
                                var val = $.fn.dataTable.util.escapeRegex(
                                    $(this).val()
                                );
                                //to select and search from grid
                                column
                                    .search( val ? '^'+val+'$' : '', true, false )
                                    .draw();
                            } );

                        column.data().unique().sort().each( function ( d, j ) {
                            select.append( '<option value="'+d+'">'+d+'</option>' )
                        } );
                    } );
                }
            } );
        } );
    </script>
    <button style="height:75px;" class="tablink" onclick="openPage('items_ALL', this)" id="defaultOpen">Все товары</button>
    <button style="height:75px;" class="tablink" onclick="openPage('items_VISIBLE', this)">В продаже</button>
    <button style="height:75px;" class="tablink" onclick="openPage('items_INVISIBLE', this)">Снят с продажи</button>
    <button style="height:75px;" class="tablink" onclick="openPage('items_READY_TO_SUPPLY', this)">Закончились</button>
    <button style="height:75px;" class="tablink" onclick="openPage('items_STATE_FAILED', this)">Ошибка</button>
    <div id="items_ALL" class="tabcontent">
        <table id="MyTable" class="display" cellspacing="0" width="100%">
            <thead>
            <tr>
                <th class="th-sm">Артикул</th>
                <th class="th-sm">Баркод</th>
                <th class="th-sm">Наименование</th>
                <th class="th-sm">Статус</th>
                <th class="th-sm">Картинка</th>
                <th class="th-sm">Видимость на сайте</th>
                <th class="th-sm">Доступно на складе, шт</th>
                <th class="th-sm">Текущая цена с учетом скидки, руб.</th>
            </tr>
            </thead>
            {% for item in items_ALL %}
                <tr>
                    {% for key, value in item.items() %}
                        {% if key != "origin" %}
                            {% if key == "Картинка" %}
                                <td style="width: 50px; height: 50px"><div class="img-container"> <!-- Block parent element -->
                                    {% for k in value %}
                                        <img style="display:block;" width="100%" height="8%" class="zoom" src="{{ k }}">
                                    {% endfor %}
                                </div></td>
                            {% else %}
                                <td style="white-space:pre-wrap; word-wrap:break-word; height: 80px">{{ value }}</td>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
    </div>

    <div id="items_VISIBLE" class="tabcontent">
        <table id="MyTable1" class="display" cellspacing="0" width="100%">
            <thead>
            <tr>
                <th class="th-sm">Артикул</th>
                <th class="th-sm">Баркод</th>
                <th class="th-sm">Наименование</th>
                <th class="th-sm">Статус</th>
                <th class="th-sm">Картинка</th>
                <th class="th-sm">Видимость на сайте</th>
                <th class="th-sm">Доступно на складе, шт</th>
                <th class="th-sm">Текущая цена с учетом скидки, руб.</th>
            </tr>
            </thead>
            {% for item in items_VISIBLE %}
                <tr>
                    {% for key, value in item.items() %}
                        {% if key != "origin" %}
                            {% if key == "Картинка" %}
                                <td style="width: 50px; height: 50px"><div class="img-container"> <!-- Block parent element -->
                                    {% for k in value %}
                                        <img style="display:block;" width="100%" height="8%" class="zoom" src="{{ k }}">
                                    {% endfor %}
                                </div></td>
                            {% else %}
                                <td style="white-space:pre-wrap; word-wrap:break-word; height: 80px">{{ value }}</td>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
    </div>

    <div id="items_INVISIBLE" class="tabcontent">
        <table id="MyTable2" class="display" cellspacing="0" width="100%">
            <thead>
            <tr>
                <th class="th-sm">Артикул</th>
                <th class="th-sm">Баркод</th>
                <th class="th-sm">Наименование</th>
                <th class="th-sm">Статус</th>
                <th class="th-sm">Картинка</th>
                <th class="th-sm">Видимость на сайте</th>
                <th class="th-sm">Доступно на складе, шт</th>
                <th class="th-sm">Текущая цена с учетом скидки, руб.</th>
            </tr>
            </thead>
            {% for item in items_INVISIBLE %}
                <tr>
                    {% for key, value in item.items() %}
                        {% if key != "origin" %}
                            {% if key == "Картинка" %}
                                <td style="width: 50px; height: 50px"><div class="img-container"> <!-- Block parent element -->
                                    {% for k in value %}
                                        <img style="display:block;" width="100%" height="8%" class="zoom" src="{{ k }}">
                                    {% endfor %}
                                </div></td>
                            {% else %}
                                <td style="white-space:pre-wrap; word-wrap:break-word; height: 80px">{{ value }}</td>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
    </div>

    <div id="items_READY_TO_SUPPLY" class="tabcontent">
        <table id="MyTable3" class="display" cellspacing="0" width="100%">
            <thead>
            <tr>
                <th class="th-sm">Артикул</th>
                <th class="th-sm">Баркод</th>
                <th class="th-sm">Наименование</th>
                <th class="th-sm">Статус</th>
                <th class="th-sm">Картинка</th>
                <th class="th-sm">Видимость на сайте</th>
                <th class="th-sm">Доступно на складе, шт</th>
                <th class="th-sm">Текущая цена с учетом скидки, руб.</th>
            </tr>
            </thead>
            {% for item in items_READY_TO_SUPPLY %}
                <tr>
                    {% for key, value in item.items() %}
                        {% if key != "origin" %}
                            {% if key == "Картинка" %}
                                <td style="width: 50px; height: 50px"><div class="img-container"> <!-- Block parent element -->
                                    {% for k in value %}
                                        <img style="display:block;" width="100%" height="8%" class="zoom" src="{{ k }}">
                                    {% endfor %}
                                </div></td>
                            {% else %}
                                <td style="white-space:pre-wrap; word-wrap:break-word; height: 80px">{{ value }}</td>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
    </div>

    <div id="items_STATE_FAILED" class="tabcontent">
        <table id="MyTable4" class="display" cellspacing="0" width="100%">
            <thead>
            <tr>
                <th class="th-sm">Артикул</th>
                <th class="th-sm">Баркод</th>
                <th class="th-sm">Наименование</th>
                <th class="th-sm">Статус</th>
                <th class="th-sm">Картинка</th>
                <th class="th-sm">Видимость на сайте</th>
                <th class="th-sm">Доступно на складе, шт</th>
                <th class="th-sm">Текущая цена с учетом скидки, руб.</th>
            </tr>
            </thead>
            {% for item in items_STATE_FAILED %}
                <tr>
                    {% for key, value in item.items() %}
                        {% if key != "origin" %}
                            {% if key == "Картинка" %}
                                <td style="width: 50px; height: 50px"><div class="img-container"> <!-- Block parent element -->
                                    {% for k in value %}
                                        <img style="display:block;" width="100%" height="8%" class="zoom" src="{{ k }}">
                                    {% endfor %}
                                </div></td>
                            {% else %}
                                <td style="white-space:pre-wrap; word-wrap:break-word; height: 80px">{{ value }}</td>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
    </div>

    <script>
        document.getElementById("defaultOpen").click();
    </script>
{% endblock %}